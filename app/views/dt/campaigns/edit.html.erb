<h1>Editing campaign</h1>

<%= error_messages_for :campaign %>
<div id="new_campaign" class="campaign_form">
	<% form_for(:campaign, @campaign, :url => { :action => "edit" }) do |f| %>

		<fieldset>
			<legend>Campaign Details</legend>
			<label>Name</label>
			<%= f.text_field :name %>

			<label>Short Name</label>
			<%= f.text_field :short_name %>

		    <label>Campaign type</label>
			<%= collection_select :campaign_type, :id, CampaignType.find(:all), :id, :name %>
			<%= observe_field :campaign_type_id, 
									:frequency => 0.25, 
									:url => { :action => :update_team_config_options}, 
									:with => :campaign_type_id
			%>

			<label>Contact Email</label>
			<%= f.text_field :email %> <span class="small_text">Use My Email </span>
			<%= f.check_box :use_user_email, :onclick => "Element.toggle('campaign_email');"%> 
	
			<label>Description</label>
			<%= f.text_area :description, :rows => 10, :cols => 70%>
		</fieldset>

		<fieldset>
			<legend>Monetary Details</legend>
	
			<label>Fundraising Goal</label> <span class="small_text"></span>
		    <%= f.text_field :fundraising_goal %> <span class="small_text">CAD $</span>

			<label>Campaign Fee</label>
			<%= f.text_field :fee_amount %> <span class="small_text">CAD $</span>

		</fieldset>

		<fieldset>
			<legend>Campaign Dates</legend>
			<label>Start date</label
			<%= f.datetime_select :start_date %>
	
			<label>End Date</label>
			<%= f.datetime_select :end_date %>
		</fieldset>

		<fieldset>
			<legend>Location</legend>
			<label>Address</label>
			<%= f.text_field :address %>
			<label>Country</label>
			<%= f.country_select :country, ["Canada", "United States"]  %>

			<%= observe_field :campaign_country, 
									:frequency => 0.25, 
									:url => { :action => :update_address_details_for_country}, 
									:with => :country
			%>		
			<label id="postal_code">Postalcode</label>
			<%= f.text_field :postalcode %>

			<label id="province">Province</label>
			<%= f.text_field :province %>
	
			<label>City</label>
			<%= f.text_field :city %>
	
		</fieldset>

		<fieldset id="team_settings">
			<legend>Team Settings</legend>
			<label>Require Authorization to Add Team</label>
			<%= f.check_box :require_team_authorization %>
	
			<label>Allow Multiple Teams</label>
			<%= f.check_box :allow_multiple_teams %>
		</fieldset>

		<fieldset id="participant_settings" style="display:none;">
			<legend>Participant Settings</legend>
			<label>Require Authorization to Join Campaign</label>
			<%= f.check_box :require_team_authorization %>
	
		</fieldset>

	<% end %>
</div>
<%= link_to 'Show', dt_campaign_path(@campaign) %> |
<%= link_to 'Back', manage_dt_campaign_path(@campaign) %>
